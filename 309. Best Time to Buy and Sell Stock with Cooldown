class Solution {
        public int maxProfit(int[] prices) {
            int length = prices.length;
            if(length == 1){
                return 0;
            }

            int _buy = -prices[0];
            int _sell = 0;

            int buy = Math.max(_buy, -prices[1]);
            int sell = Math.max(0, _buy+prices[1]);

            for (int i = 2; i < prices.length; i++) {
                int buyNow = Math.max(buy, _sell-prices[i]);
                int sellNow = Math.max(sell, buy+prices[i]);
                _buy = buy;
                _sell = sell;
                buy = buyNow;
                sell = sellNow;
            }
            return sell;
        }
    }
